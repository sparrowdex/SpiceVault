# Spice Vault Project Explanation

## Project Overview

Spice Vault is a comprehensive full-stack web application designed to serve as a centralized platform for recipe sharing and discovery. The application aims to make cooking accessible and enjoyable by providing users with a vast database of recipes from diverse cuisines worldwide. It combines traditional recipe browsing features with advanced machine learning-powered recommendations to create a personalized cooking experience.

The platform allows users to explore recipes, contribute their own creations, rate and review dishes, and receive intelligent recommendations based on their preferences and behavior. Spice Vault targets both novice cooks looking for easy recipes and experienced chefs seeking inspiration from global cuisines.

## Tech Stack

- **Frontend**: React.js with CSS/Tailwind for responsive UI
- **Backend**: Node.js with Express.js framework
- **Database**: MySQL with Sequelize ORM
- **Authentication**: JWT (JSON Web Tokens) with bcrypt for password hashing
- **Machine Learning**: Custom ML service using ml-matrix, natural language processing, and cosine similarity algorithms
- **Version Control**: Git & GitHub
- **Deployment**: Planned for future (Heroku/Vercel/Netlify)

## Core Features

### 1. User Authentication & Profiles
- User registration and login with secure JWT authentication
- User profiles with personal information and cooking preferences
- Password hashing using bcryptjs for security

### 2. Recipe Management
- **Browse Recipes**: Extensive database of recipes from various cuisines
- **Search Functionality**: Search recipes by ingredients, cuisine type, or keywords
- **Filter System**: Filter by difficulty levels (easy, medium, hard), preparation time, cooking time
- **Recipe Details**: Comprehensive recipe pages with ingredients, instructions, nutritional information, and images
- **Add Recipes**: Users can contribute their own recipes to the platform
- **Recipe Categories**: Organized by food categories (main course, dessert, appetizer, etc.) and diet types (vegetarian, vegan, gluten-free, etc.)

### 3. Social Features
- **Rating System**: 1-5 star rating system for recipes
- **Reviews & Comments**: Users can leave detailed reviews and feedback
- **User Interactions**: Like, save, share, and mark recipes as cooked
- **Chef Certification**: Special status for verified chefs with enhanced features

### 4. Advanced Features
- **Popular Recipes Section**: Displays top-rated recipes on the homepage based on average ratings and number of ratings (not ML-powered)
- **Chef Leaderboard**: Global ranking system for chefs based on their recipe performance (average ratings and rating count, not ML-powered)
- **Chef Insights**: Analytics dashboard for chefs to track their recipe performance and statistics
- **User Insights Bar**: Personalized insights and statistics for users

### 5. User Interface & Experience
- **Responsive Design**: Works seamlessly on desktop and mobile devices
- **Modern UI**: Clean, intuitive interface with custom fonts and styling
- **Interactive Components**: Slideshows, modals, and dynamic content loading
- **Background Gradients**: Aesthetic visual elements for enhanced user experience

## Machine Learning Features

Spice Vault incorporates a sophisticated machine learning recommendation system that analyzes user behavior and recipe characteristics to provide personalized suggestions. The ML system is built using custom algorithms and integrates seamlessly with the existing database structure.

### ML Architecture

The ML service is implemented in `backend/services/mlRecommendationService.js` and uses several key technologies:
- **ml-matrix**: For matrix operations and similarity calculations
- **natural**: For natural language processing tasks
- **lodash**: For data manipulation utilities

### Detailed ML Techniques and Algorithms

#### 1. Collaborative Filtering (User-Based)
- **Core Algorithm**: Memory-based collaborative filtering using user-user similarity
- **Mathematical Foundation**: Cosine similarity for measuring user preferences
- **Formula**: For users u and v, similarity = cos(θ) = (u · v) / (||u|| * ||v||)
- **Matrix Construction**:
  - User-Item Matrix: R[u][i] where u ∈ users, i ∈ items
  - Sparse matrix handling for missing ratings (treated as 0)
  - Normalization: Ratings centered by subtracting user mean
- **Prediction Algorithm**:
  - Find k most similar users (k=20 in implementation)
  - Weighted average: P(u,i) = Σ(similarity(u,v) * R[v,i]) / Σ|similarity(u,v)|
  - Neighborhood selection: Top 20 similar users with positive correlations
- **Advantages**: Captures complex user preferences, serendipitous discoveries
- **Limitations**: Cold start problem, sparsity issues, scalability concerns
- **Implementation Details**: Uses ml-matrix library for efficient matrix operations

#### 2. Content-Based Filtering
- **Core Algorithm**: Profile-based recommendation using feature similarity
- **Feature Engineering**:
  - Multi-dimensional tag vectors for recipes
  - User preference profiles built from interaction history
  - Weighted tag categories with different importance scores
- **Similarity Computation**:
  - Cosine similarity between user profile and recipe feature vectors
  - Weighted scoring: score = Σ(weight_category * tag_match) / total_weights
  - Tag matching: Binary presence/absence with frequency weighting
- **User Profile Building**:
  - Analyzes recipes with positive interactions (likes, saves, cooks)
  - Aggregates tag frequencies across user's preferred recipes
  - Applies category-specific weights for preference strength
- **Content Features Used**:
  - Cuisine types (Italian, Indian, Asian, etc.)
  - Dietary restrictions (vegetarian, vegan, gluten-free)
  - Meal types (breakfast, lunch, dinner, dessert)
  - Cooking methods (grilled, baked, fried, steamed)
  - Ingredient categories (protein, vegetable, grain, dairy)
- **Advantages**: No cold start issues, transparent recommendations, domain-specific
- **Limitations**: Limited discovery, overspecialization, feature engineering complexity

#### 3. Hybrid Recommendation System
- **Fusion Strategy**: Linear combination of collaborative and content-based scores
- **Weight Optimization**: Empirical weights (60% collaborative, 40% content-based)
- **Score Combination Formula**: final_score = 0.6 * collab_score + 0.4 * content_score
- **Deduplication**: Removes duplicate recipes from combined lists
- **Re-ranking**: Sorts by combined scores, maintains diversity
- **Fallback Mechanism**: Random selection when ML methods fail
- **Advantages**: Combines strengths of both approaches, improved accuracy
- **Performance Metrics**: Higher precision and recall compared to individual methods

#### 4. Advanced ML Techniques Implemented

**Matrix Factorization Concepts**:
- **SVD-based Approach**: Theoretical foundation for collaborative filtering
- **Latent Factor Models**: User and item embeddings in lower-dimensional space
- **Regularization**: Prevents overfitting in similarity calculations

**Similarity Measures**:
- **Cosine Similarity**: Primary measure for both user-user and item-item similarity
- **Pearson Correlation**: Alternative similarity measure (implemented but not primary)
- **Jaccard Similarity**: For binary preference data (explored but not implemented)

**Optimization Techniques**:
- **Matrix Caching**: 24-hour update intervals to reduce computational load
- **Batch Processing**: Periodic matrix recalculations instead of real-time updates
- **Memory Management**: Efficient sparse matrix representations
- **Query Optimization**: Database-level aggregations for rating statistics

**Scalability Considerations**:
- **Incremental Updates**: Partial matrix updates for new ratings
- **Approximate Methods**: Sampling-based similarity calculations for large datasets
- **Distributed Processing**: Designed for future horizontal scaling

**Evaluation Framework**:
- **Offline Metrics**: Precision@K, Recall@K, NDCG for recommendation quality
- **Online Metrics**: Click-through rates, user engagement, conversion rates
- **A/B Testing**: Framework for comparing different recommendation strategies

### User Interaction Tracking

The ML system tracks various user interactions to build comprehensive behavior profiles:
- **View**: When a user views a recipe
- **Like**: When a user likes a recipe
- **Save**: When a user saves a recipe for later
- **Cook**: When a user marks a recipe as cooked
- **Share**: When a user shares a recipe (not yet included)

### Data Processing

- **Matrix Updates**: User-item matrices are updated periodically (every 24 hours) or on-demand
- **Similarity Calculations**: Cosine similarity is used for both user-user and item-item similarities
- **Cold Start Problem**: Handles new users and recipes with fallback recommendations
- **Performance**: Uses efficient matrix operations and caching to ensure fast response times

### API Endpoints

- `GET /api/ml/recommendations/:userId?type=hybrid&limit=10`: Get personalized recommendations
- `POST /api/ml/ratings`: Submit recipe ratings
- `GET /api/ml/ratings/:userId`: Get user's rating history
- `POST /api/ml/interactions`: Record user interactions
- `GET /api/ml/interactions/:userId`: Get user's interaction history

## Dataset and Data Structure

### Database Schema

The application uses MySQL database with the following key tables:

#### Recipes Table
- `recipe_id`: Primary key, auto-increment
- `user_id`: ID of the user who created the recipe
- `chef_id`: ID of certified chef (if applicable)
- `title`: Recipe title (max 150 characters)
- `description`: Recipe description
- `instructions`: Cooking instructions
- `difficulty`: Easy/Medium/Hard
- `food_category`: Main course, dessert, appetizer, etc.
- `diet_type`: Vegetarian, vegan, gluten-free, etc.
- `image_url`: Path to recipe image
- `preparation_time`: Time to prepare
- `cooking_time`: Cooking duration
- `nutrition_info`: Nutritional information

#### Users Table
- Standard user information (username, email, password hash)
- Profile information and preferences

#### Ratings Table (Reviews_Given)
- `user_id`: User who gave the rating
- `recipe_id`: Recipe being rated
- `rating`: 1-5 star rating
- `review_text`: Optional review text
- `timestamp`: When the rating was given

#### User Interactions Table
- `user_id`: User performing the interaction
- `recipe_id`: Recipe being interacted with
- `interaction_type`: view/like/save/cook/share
- `timestamp`: When the interaction occurred

#### Recipe Tags Table
- `recipe_id`: Associated recipe
- `tag_category`: Type of tag (cuisine, diet, ingredient, etc.)
- `tag_name`: Specific tag value

### Seeded Data

The application includes comprehensive seeded data for testing and demonstration:

#### Recipe Data
- **Images**: 40+ recipe images stored in `backend/images/` including various cuisines:
  - Italian: Carbonara, Pasta, Risotto
  - Indian: Channa Masala, Saag Paneer, Tandoori, Veg Rogan Josh
  - Asian: Sushi, Thai Green Curry, Stir Fry, Miso Glazed Aubergine
  - American: BBQ Ribs, Pancakes, Brownie, Lava Cake
  - Other: Fish Tacos, Buddha Bowl, Salad, Sausage Rolls, etc.

#### ML Training Data
- **Ratings**: 40+ ratings across different users and recipes
- **User Interactions**: 30+ interactions including views, likes, saves, and cooks
- **Recipe Tags**: Comprehensive tagging for occasions, allergies, and cuisines
- **Test Users**: Pre-created user accounts for testing (credentials in TEST_USER_CREDENTIALS.txt)

### Data Seeding Scripts

- `backend/seeders/mlDataSeeder.js`: Seeds ML training data
- `backend/seeders/testUserSeeder.js`: Creates test user accounts
- `npm run seed:ml`: Command to seed ML data

### Data Quality and Enhancement

- **Rich Metadata**: Recipes include detailed information for better ML performance
- **Tag System**: Multi-category tagging for precise content-based filtering
- **Interaction Diversity**: Various interaction types provide comprehensive user behavior data
- **Scalability**: Database design supports large-scale user and recipe growth

## Future Enhancements

### Planned Features
- Video recipe tutorials
- Advanced leaderboard system
- Social sharing and following
- Grocery list generation
- Meal planning functionality

### ML Improvements
- Deep learning integration
- Real-time model updates
- A/B testing framework
- Advanced cold start solutions
- Ingredient-based recommendations

### Performance Optimizations
- Caching layer for recommendations
- Batch processing for ML updates
- Database query optimization
- CDN for image delivery

This comprehensive ML-powered recipe platform provides users with intelligent, personalized cooking recommendations while maintaining an intuitive and engaging user experience.
